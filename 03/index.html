<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../core.css">
    <title>dreams from long ago ~ no. 3</title>
</head>
<body>
    <div class="title">
    <small><a href="../index.html">dreams from long ago</a></small>
    <h2 id="title-txt">no. 3 ~ a window to the sun</h2></div>


    <div class="window topbottom" id="top">
        <p class="whisper" id="w3">bedsheets</p>
        <p class="whisper" id="w5">take a deep breath</p>
    </div>
    <div class="window leftright" id="left">
        <p class="whisper" id="w4">hands touch</p>
    </div>
    <div class="window leftright" id="right">
        <p class="whisper" id="w2">cold air</p>
    </div>
    <div class="window topbottom" id="bottom">
        <p class="whisper" id="w6">look at the light</p>
        <p class="whisper" id="w1">your old window</p>
        
    </div>

    <div class="memory">
        <img class="flashbulb" id="img1" src="./src/output1.gif">
        <img class="flashbulb" id="img2" src="./src/test3.gif">
        <img class="flashbulb" id="img3" src="./src/test.gif">
        <img class="flashbulb" id="img4" src="./src/test2.gif">
        <!-- <img class="flashbulb" id="img5" src="./src/test4.gif"> -->
        <img class="flashbulb" id="img5" src="./src/test5.gif">
        <img class="flashbulb" id="img6" src="./src/test6.gif">
        <img class="flashbulb" id="img7" src="./src/test4.gif">
    </div>
    <div class="dream-stuff">
        <p class="whisper" id="w7">‚áê <a href="../index.html">wake up</a></p>
    </div>


</body>

<script>

window.addEventListener("load", () => {
  console.log('doop')
  Window.scroll(0,0)
})
//frames
let panes = [
document.getElementById("top"), 
document.getElementById("bottom"),
document.getElementById("left"), 
document.getElementById("right")
]

let tpane = document.getElementById("top");
let bpane = document.getElementById("bottom");
let lpane = document.getElementById("left");
let rpane = document.getElementById("right");

let frameSize = [
    //top, bottom, left, right
    [50, 50, 50, 50], //frame 0
    [10, 15, 30, 30], // frame 1
    [10, 10, 5, 65], //frame 2
    [10, 10, 35, 35], //frame 3
    [10, 10, 65, 5], //frame 4
    [10, 7, 7, 7], //frame 5
    [7, 10, 7, 7], //frame 6
    [0, 0, 0, 0] //frame 7
]

let height = document.body.scrollHeight;
let framenum = 7;
console.log(height)

let scrollDepth = [0, (height/framenum), (height/framenum)*2, (height/framenum)*3, (height/framenum)*4, (height/framenum)*5, (height/framenum)*6, (height/framenum)*5, (height/framenum)*7];
console.log(scrollDepth)
//scrolly
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    let readerScroll = document.documentElement.scrollTop;
    // console.log(readerScroll)
  if (readerScroll > scrollDepth[0] && readerScroll < scrollDepth[1]) {
    changeFrame(1)
  } else if (readerScroll > scrollDepth[1] && readerScroll < scrollDepth[2]) {
    changeFrame(2)
  } else if (readerScroll > scrollDepth[2] && readerScroll < scrollDepth[3])  {
    changeFrame(3)
  } else if (readerScroll > scrollDepth[3] && readerScroll < scrollDepth[4])  {
    changeFrame(4)
  } else if (readerScroll > scrollDepth[4] && readerScroll < scrollDepth[5])  {
    changeFrame(5)
  } else if (readerScroll > scrollDepth[5] && readerScroll < scrollDepth[6])  {
    changeFrame(6)
  } else if (readerScroll > scrollDepth[7]) {
    changeFrame(7)
  }
  else {
    changeFrame(0)
  }
}

function changeFrame(p) {
    let panel = p;
    tpane.style.height = frameSize[panel][0] + `vh`;
    bpane.style.height = frameSize[panel][1] + `vh`;
    lpane.style.width = frameSize[panel][2] + `vw`;
    rpane.style.width = frameSize[panel][3] + `vw`;
    listen(p);
}

function listen(p) {
    if (p > 0) {
    //display text
    let whispers = document.getElementsByClassName("whisper");
    for (let i = 0; i < whispers.length; i++) {
        whispers[i].style.display = "none";
    }
    let thiswhisper = document.getElementById("w" + p)
    thiswhisper.style.display = "block";

    //display image
    let flashbulb = document.getElementsByClassName("flashbulb");
    for (let i = 0; i < flashbulb.length; i++) {
        flashbulb[i].classList.add("forget");
    }
    let thisflashbulb = document.getElementById("img" + p) 
        thisflashbulb.classList.remove("forget");
        console.log(flashbulb, thisflashbulb)
    }


    
}

// //drag & drop
// let activeElement = null;
// let offset_x;
// let offset_y;
// let last_z = 1;

// document.body.addEventListener("mousedown", function (ev) {
//   ev.preventDefault();
//   activeElement = ev.target;

//   let bounds = ev.target.getBoundingClientRect();

//   offset_x = ev.clientX - bounds.left;
//   offset_y = ev.clientY - bounds.top;
//   activeElement.style.zIndex = last_z;
//   last_z++;
// });

// document.body.addEventListener("mouseup", function (ev) {
//   activeElement = null;
// });

// document.body.addEventListener("mousemove", function (ev) {
//   let x = ev.clientX - offset_x;
//   let y = ev.clientY - offset_y;
//   if (activeElement) {
//     activeElement.style.left = x + "px";
//     activeElement.style.top = y + "px";
//   }
// });

</script>
</html>